<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DjsDopeDesigns</title>
<style>
  body {font-family:Arial,sans-serif;margin:0;background:#f6f6f6;}
  .header {position:sticky;top:0;background:#fff;padding:10px;display:flex;align-items:center;gap:10px;box-shadow:0 2px 6px rgba(0,0,0,0.1);}
  .logo {font-weight:bold;}
  .cart {position:relative;}
  #cart-count {position:absolute;top:-5px;right:-5px;background:#f1641e;color:#fff;border-radius:50%;padding:2px 6px;font-size:12px;}
  .products {display:flex;flex-wrap:wrap;gap:10px;margin:10px;}
  .card {background:#fff;padding:10px;border-radius:8px;width:calc(33%-20px);box-sizing:border-box;position:relative;}
  .card img {width:100%;border-radius:6px;}
  .card .heart {position:absolute;top:5px;right:5px;cursor:pointer;}
  .btn {padding:8px 12px;margin-top:5px;width:100%;background:#f1641e;color:#fff;border:none;border-radius:6px;cursor:pointer;}
</style>
</head>
<body>

<header class="header">
  <a href="index.html" class="logo">DjsDopeDesigns</a>
  <a href="cart.html" class="cart">ðŸ›’ <span id="cart-count">0</span></a>
</header>

<section class="products" id="product-grid"></section>

<script>
let allProducts = [];

// Load products and render grid
fetch('products.json')
  .then(res=>res.json())
  .then(products=>{
    allProducts = products;
    const grid = document.getElementById('product-grid');
    products.forEach(p=>{
      const card = document.createElement('div');
      card.className = 'card';
      card.innerHTML = `
        <div class="heart" onclick="toggleLike('${p.id}', this)">â™¡</div>
        <a href="product.html?id=${p.id}">
          <img src="${p.image}" alt="${p.name}">
          <h3>${p.name}</h3>
        </a>
        <p>$${(p.price/100).toFixed(2)}</p>
        <button class="btn" onclick="addToCart('${p.id}')">Add to Cart</button>
      `;
      grid.appendChild(card);
    });
    restoreLikedHearts();
  });

// Add to cart
function addToCart(productId){
  const product = allProducts.find(p=>p.id===productId);
  if(!product) return;
  let cart = JSON.parse(localStorage.getItem("cart")) || [];
  const existing = cart.find(i=>i.id===productId);
  if(existing) existing.quantity++;
  else cart.push({id:product.id,name:product.name,price:product.price/100,quantity:1,image:product.image});
  localStorage.setItem("cart", JSON.stringify(cart));
  alert(`${product.name} added to cart!`);
  updateCartCount();
}

// Cart counter
function updateCartCount(){
  const cart = JSON.parse(localStorage.getItem("cart")) || [];
  const total = cart.reduce((sum,i)=>sum+i.quantity,0);
  document.getElementById("cart-count").textContent = total;
}
updateCartCount();

// Likes
function toggleLike(id, el){
  let liked = JSON.parse(localStorage.getItem("likedItems")) || [];
  if(liked.includes(id)){ liked = liked.filter(i=>i!==id); el.textContent="â™¡"; }
  else { liked.push(id); el.textContent="â™¥"; }
  localStorage.setItem("likedItems", JSON.stringify(liked));
}
function restoreLikedHearts(){
  let liked = JSON.parse(localStorage.getItem("likedItems")) || [];
  document.querySelectorAll(".card").forEach(card=>{
    const heart = card.querySelector(".heart");
    const link = card.querySelector("a");
    if(!heart||!link) return;
    const id = new URL(link.href).searchParams.get("id");
    if(liked.includes(id)) heart.textContent="â™¥";
  });
}
</script>
</body>
</html>
