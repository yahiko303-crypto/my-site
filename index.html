<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DjsDopeDesigns</title>
<style>
  body { 
    font-family: "Helvetica Neue", Arial, sans-serif; 
    margin: 0; 
    background: #fafafa; 
    color: #333;
  }

  /* üîù Sticky Header */
  .header { 
    position: sticky; 
    top: 0; 
    background: #fff; 
    padding: 12px 20px; 
    display: flex; 
    align-items: center; 
    justify-content: space-between;
    box-shadow: 0 2px 6px rgba(0,0,0,0.08); 
    z-index: 1000;
  }
  .logo { 
    font-weight: bold; 
    font-size: 1.2rem; 
    text-decoration: none; 
    color: #222; 
  }
  .cart { 
    position: relative; 
    font-size: 1.4rem; 
    text-decoration: none;
    color: #444;
  }
  #cart-count { 
    position: absolute; 
    top: -8px; 
    right: -10px; 
    background: #f1641e; 
    color: #fff; 
    border-radius: 50%; 
    padding: 2px 7px; 
    font-size: 12px; 
    font-weight: bold;
  }

  /* üõç Product Grid */
  .products {
    display: grid;
    grid-template-columns: repeat(4, 1fr); /* 4 per row */
    gap: 20px;
    margin: 20px auto;
    max-width: 1400px; /* keeps the grid from being too wide */
    justify-content: center;
  }

  .card {
    background: #fff;
    padding: 10px;
    border-radius: 8px;
    box-sizing: border-box;
    position: relative;
    display: flex;
    flex-direction: column;
    max-width: 300px; /* üëà keeps each card smaller */
    margin: 0 auto;
  }

  .card img {
    width: 100%;
    border-radius: 6px;
  }

  .card .heart {
    position: absolute;
    top: 5px;
    right: 5px;
    cursor: pointer;
  }

  /* üü° Add to Cart Button Style */
  .btn {
    background: #fbca1f;
    font-family: inherit;
    padding: 0.6em 1.3em;
    font-weight: 900;
    font-size: 18px;
    border: 3px solid black;
    border-radius: 0.4em;
    box-shadow: 0.1em 0.1em;
    cursor: pointer;
    width: 100%;
    margin-top: auto;
  }

  .btn:hover {
    transform: translate(-0.05em, -0.05em);
    box-shadow: 0.15em 0.15em;
  }

  .btn:active {
    transform: translate(0.05em, 0.05em);
    box-shadow: 0.05em 0.05em;
  }

  /* üì± Mobile: 2 per row */
  @media (max-width: 768px) {
    .products {
      grid-template-columns: repeat(2, 1fr);
    }
  }
</style>
</head>
<body>

<header class="header">
  <a href="index.html" class="logo">DjsDopeDesigns</a>
  <a href="cart.html" class="cart">üõí <span id="cart-count">0</span></a>
</header>

<section class="products" id="product-grid"></section>

<script>
let allProducts = [];

// Load products and render grid
fetch('products.json')
  .then(res=>res.json())
  .then(products=>{
    allProducts = products;
    const grid = document.getElementById('product-grid');
    products.forEach(p=>{
      const card = document.createElement('div');
      card.className = 'card';
      card.innerHTML = `
        <div class="heart" onclick="toggleLike('${p.id}', this)">‚ô°</div>
        <a href="product.html?id=${p.id}">
          <img src="${p.image}" alt="${p.name}">
          <h3>${p.name}</h3>
        </a>
        <p>$${(p.price/100).toFixed(2)}</p>
        <button class="btn" onclick="addToCart('${p.id}')">Add to Cart</button>
      `;
      grid.appendChild(card);
    });
    restoreLikedHearts();
  });

// Add to cart
function addToCart(productId){
  const product = allProducts.find(p=>p.id===productId);
  if(!product) return;
  let cart = JSON.parse(localStorage.getItem("cart")) || [];
  const existing = cart.find(i=>i.id===productId);
  if(existing) existing.quantity++;
  else cart.push({id:product.id,name:product.name,price:product.price/100,quantity:1,image:product.image});
  localStorage.setItem("cart", JSON.stringify(cart));
  alert(`${product.name} added to cart!`);
  updateCartCount();
}

// Cart counter
function updateCartCount(){
  const cart = JSON.parse(localStorage.getItem("cart")) || [];
  const total = cart.reduce((sum,i)=>sum+i.quantity,0);
  document.getElementById("cart-count").textContent = total;
}
updateCartCount();

// Likes
function toggleLike(id, el){
  let liked = JSON.parse(localStorage.getItem("likedItems")) || [];
  if(liked.includes(id)){ liked = liked.filter(i=>i!==id); el.textContent="‚ô°"; }
  else { liked.push(id); el.textContent="‚ô•"; }
  localStorage.setItem("likedItems", JSON.stringify(liked));
}
function restoreLikedHearts(){
  let liked = JSON.parse(localStorage.getItem("likedItems")) || [];
  document.querySelectorAll(".card").forEach(card=>{
    const heart = card.querySelector(".heart");
    const link = card.querySelector("a");
    if(!heart||!link) return;
    const id = new URL(link.href).searchParams.get("id");
    if(liked.includes(id)) heart.textContent="‚ô•";
  });
}
</script>
</body>
</html>
